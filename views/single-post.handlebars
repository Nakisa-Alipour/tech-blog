<!-- views/single-post.handlebars -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>{{post.title}}</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <header>
    <h1>{{post.title}}</h1>
    <nav>
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/login">Login</a></li>
        <li><a href="/signup">Sign Up</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <article>
      <h2>By: {{post.user.username}}</h2>
      <p>{{post.content}}</p>
    </article>

    <section class="comments">
      <h3>Comments</h3>

      {{!-- Iterate over the comments --}}
      {{#each post.comments}}
        <div class="comment">
          <h4>By: {{user.username}}</h4>
          <p>{{comment_text}}</p>
        </div>
      {{/each}}
    </section>

    <section class="add-comment">
      <h3>Add a Comment</h3>

      <form action="/api/comments" method="POST">
        <input type="hidden" name="post_id" value="{{post.id}}">
        
        <label for="comment">Comment:</label>
        <textarea id="comment" name="comment_text" required></textarea>
        
        <button type="submit">Add Comment</button>
      </form>
    </section>
  </main>

  <footer>
    <p>Â© 2023 Blog. All rights reserved.</p>
  </footer>
</body>
</html>

